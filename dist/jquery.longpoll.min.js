/* jQuery LongPoll client script */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(b){function c(){h=a.ajax({type:e.type,url:e.url,data:f,dataType:"json"}).done(function(b){var d=!1;a.each(b.params,function(a,b){if(f[a]!=b)return d=!0,!1}),f=b.params,d&&"function"==typeof e.callback&&e.callback(b.data),g=setTimeout(c,e.pollInterval)}).fail(function(a){a.status&&(g=setTimeout(c,e.pollErrorInterval))}).always(function(){h=null})}var e=a.extend({},d,b||{}),f=e.params,g=null,h=null;this.start=function(){null===h&&null===g&&c()},this.stop=function(){null!==h&&h.abort(),null!==g&&(clearTimeout(g),g=null)}}a.longpoll={start:function(){a.each(c,function(a,b){b.start()})},stop:function(){a.each(c,function(a,b){b.stop()})},register:function(a){c.push(new b(a))},clear:function(){a.longpoll.stop(),c=[]}};var c=[],d={type:"GET",url:void 0,params:void 0,callback:void 0,pollInterval:500,pollErrorInterval:5e3}});